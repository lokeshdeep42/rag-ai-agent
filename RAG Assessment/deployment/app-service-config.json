{
  "name": "rag-ai-agent-app",
  "location": "East US",
  "properties": {
    "serverFarmId": "/subscriptions/{subscription-id}/resourceGroups/rag-ai-agent-rg/providers/Microsoft.Web/serverfarms/rag-ai-agent-plan",
    "siteConfig": {
      "linuxFxVersion": "DOCKER|ragaiagentacr.azurecr.io/rag-ai-agent:latest",
      "alwaysOn": true,
      "healthCheckPath": "/api/v1/health",
      "appSettings": [
        {
          "name": "WEBSITES_PORT",
          "value": "8000"
        },
        {
          "name": "DOCKER_REGISTRY_SERVER_URL",
          "value": "https://ragaiagentacr.azurecr.io"
        },
        {
          "name": "DOCKER_ENABLE_CI",
          "value": "true"
        },
        {
          "name": "AZURE_OPENAI_API_KEY",
          "value": "@Microsoft.KeyVault(SecretUri=https://{keyvault-name}.vault.azure.net/secrets/openai-api-key/)"
        },
        {
          "name": "AZURE_OPENAI_ENDPOINT",
          "value": "https://{resource-name}.openai.azure.com/"
        },
        {
          "name": "AZURE_OPENAI_DEPLOYMENT_NAME",
          "value": "gpt-4"
        },
        {
          "name": "AZURE_OPENAI_EMBEDDING_DEPLOYMENT",
          "value": "text-embedding-ada-002"
        },
        {
          "name": "AZURE_OPENAI_API_VERSION",
          "value": "2024-02-15-preview"
        },
        {
          "name": "VECTOR_STORE_TYPE",
          "value": "faiss"
        },
        {
          "name": "LOG_LEVEL",
          "value": "INFO"
        }
      ],
      "cors": {
        "allowedOrigins": ["*"],
        "supportCredentials": false
      }
    },
    "httpsOnly": true,
    "clientAffinityEnabled": false
  }
}
